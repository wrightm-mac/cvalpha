div#loginBox(data-fragment='/fragments/loginbox')
    input.standardInput(type="text", id="loginEmail", name="email", placeholder="email")
    input.standardInput(type="password", id="loginPassword", name="password", placeholder="password")
    div#loginBoxButtons
        div#loginOk.standardButton
            | Login
        div#loginCancel.standardButton
            | Cancel
    div#loginRegistrationText
        | Don't have an account?
        span#loginRegister
            | register

script.
    $(function() {
        let $loginBox = $("#loginBox");

        $("#loginBubble").click(function() {
            if ($loginBox.hidden()) {
                $loginBox.fadeIn();
            }
            else {
                $loginBox.fadeOut();
            }
        });

        $("#loginBoxButtons div").button();

        $("#loginOk").click(function() {
            let email = $("#loginEmail").val();
            let password = $("#loginPassword").val();

            console.log("login [email=%s][password=%s]", email, password);

            $.ajax({
                url: "/api/login",
                method: "POST",
                data: {
                    email: email,
                    password: password
                }
            })
            .done((data, status) => {
                console.log("login [response-data=%o][status=%o]", data, status);
            })
            .fail(error => {
                console.error("login [response-error=%o]", error);
            })
            .always(() => {
                $loginBox.fadeOut();
            });
        });

        $("#loginCancel").click(function() {
            $loginBox.fadeOut();
        });
    });
